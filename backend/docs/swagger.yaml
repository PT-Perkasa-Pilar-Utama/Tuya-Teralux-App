basePath: /
definitions:
  dtos.CreateDeviceRequestDTO:
    properties:
      name:
        type: string
      teralux_id:
        type: string
    required:
    - name
    - teralux_id
    type: object
  dtos.CreateDeviceResponseDTO:
    properties:
      device_id:
        type: string
    type: object
  dtos.CreateDeviceStatusRequestDTO:
    properties:
      code:
        type: string
      device_id:
        type: string
      name:
        type: string
      value:
        type: integer
    required:
    - code
    - device_id
    type: object
  dtos.CreateDeviceStatusResponseDTO:
    properties:
      status_id:
        type: string
    type: object
  dtos.CreateTeraluxRequestDTO:
    properties:
      mac_address:
        type: string
      name:
        type: string
      room_id:
        type: string
    required:
    - mac_address
    - name
    - room_id
    type: object
  dtos.CreateTeraluxResponseDTO:
    properties:
      teralux_id:
        type: string
    type: object
  dtos.DeviceListResponseDTO:
    properties:
      devices:
        items:
          $ref: '#/definitions/dtos.DeviceResponseDTO'
        type: array
      total:
        type: integer
    type: object
  dtos.DeviceResponseDTO:
    properties:
      category:
        type: string
      created_at:
        type: string
      gateway_id:
        type: string
      icon:
        type: string
      id:
        type: string
      ip:
        type: string
      local_key:
        type: string
      model:
        type: string
      name:
        type: string
      product_name:
        type: string
      remote_category:
        type: string
      remote_id:
        type: string
      remote_product_name:
        type: string
      teralux_id:
        type: string
      updated_at:
        type: string
    type: object
  dtos.DeviceStatusListResponseDTO:
    properties:
      statuses:
        items:
          $ref: '#/definitions/dtos.DeviceStatusResponseDTO'
        type: array
      total:
        type: integer
    type: object
  dtos.DeviceStatusResponseDTO:
    properties:
      code:
        type: string
      created_at:
        type: string
      device_id:
        type: string
      id:
        type: string
      name:
        type: string
      updated_at:
        type: string
      value:
        type: integer
    type: object
  dtos.SensorDataDTO:
    properties:
      battery_percentage:
        type: integer
      humidity:
        type: integer
      status_text:
        type: string
      temp_unit:
        type: string
      temperature:
        type: number
    type: object
  dtos.StandardResponse:
    properties:
      data: {}
      message:
        type: string
      status:
        type: boolean
    type: object
  dtos.TeraluxListResponseDTO:
    properties:
      teralux:
        items:
          $ref: '#/definitions/dtos.TeraluxResponseDTO'
        type: array
      total:
        type: integer
    type: object
  dtos.TeraluxResponseDTO:
    properties:
      created_at:
        type: string
      devices:
        items:
          $ref: '#/definitions/dtos.DeviceResponseDTO'
        type: array
      id:
        type: string
      mac_address:
        type: string
      name:
        type: string
      room_id:
        type: string
      updated_at:
        type: string
    type: object
  dtos.TuyaAuthResponseDTO:
    properties:
      access_token:
        type: string
      expire_time:
        type: integer
      refresh_token:
        type: string
      uid:
        type: string
    type: object
  dtos.TuyaCommandDTO:
    properties:
      code:
        type: string
      value: {}
    required:
    - code
    - value
    type: object
  dtos.TuyaDeviceDTO:
    properties:
      category:
        type: string
      collections:
        items:
          $ref: '#/definitions/dtos.TuyaDeviceDTO'
        type: array
      create_time:
        type: integer
      custom_name:
        type: string
      gateway_id:
        type: string
      icon:
        type: string
      id:
        type: string
      ip:
        type: string
      local_key:
        type: string
      model:
        type: string
      name:
        type: string
      online:
        type: boolean
      product_name:
        type: string
      remote_category:
        type: string
      remote_id:
        type: string
      remote_product_name:
        type: string
      status:
        items:
          $ref: '#/definitions/dtos.TuyaDeviceStatusDTO'
        type: array
      update_time:
        type: integer
    type: object
  dtos.TuyaDeviceResponseDTO:
    properties:
      device:
        $ref: '#/definitions/dtos.TuyaDeviceDTO'
    type: object
  dtos.TuyaDeviceStatusDTO:
    properties:
      code:
        type: string
      value: {}
    type: object
  dtos.TuyaDevicesResponseDTO:
    properties:
      current_page_count:
        type: integer
      devices:
        items:
          $ref: '#/definitions/dtos.TuyaDeviceDTO'
        type: array
      total_devices:
        type: integer
    type: object
  dtos.TuyaIRACCommandDTO:
    properties:
      code:
        type: string
      remote_id:
        type: string
      value:
        type: integer
    required:
    - code
    - remote_id
    type: object
  dtos.TuyaSyncDeviceDTO:
    properties:
      create_time:
        type: integer
      id:
        type: string
      online:
        type: boolean
      remote_id:
        type: string
      update_time:
        type: integer
    type: object
  dtos.UpdateDeviceRequestDTO:
    properties:
      name:
        type: string
    type: object
  dtos.UpdateDeviceStatusRequestDTO:
    properties:
      name:
        type: string
      value:
        description: Pointer to allow 0 as a valid value update if needed, though
          int is fine if 0 is not 'empty'
        type: integer
    type: object
  dtos.UpdateTeraluxRequestDTO:
    properties:
      mac_address:
        type: string
      name:
        type: string
      room_id:
        type: string
    type: object
host: localhost:8080
info:
  contact:
    email: support@swagger.io
    name: API Support
    url: http://www.swagger.io/support
  description: This is the API server for Teralux App.
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: Teralux API
  version: "1.0"
paths:
  /api/cache/flush:
    delete:
      consumes:
      - application/json
      description: Remove all data from the cache storage
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
      security:
      - BearerAuth: []
      summary: Flush all cache
      tags:
      - 06. Flush
  /api/device-statuses:
    get:
      consumes:
      - application/json
      description: Retrieves all device statuses
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/dtos.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/dtos.DeviceStatusListResponseDTO'
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
      security:
      - BearerAuth: []
      summary: Get All Device Statuses
      tags:
      - 05. Device Statuses
    post:
      consumes:
      - application/json
      description: Creates a new device status
      parameters:
      - description: Create Device Status Request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dtos.CreateDeviceStatusRequestDTO'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/dtos.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/dtos.CreateDeviceStatusResponseDTO'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
      security:
      - BearerAuth: []
      summary: Create Device Status
      tags:
      - 05. Device Statuses
  /api/device-statuses/{id}:
    delete:
      consumes:
      - application/json
      description: Deletes a device status
      parameters:
      - description: Device Status ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
      security:
      - BearerAuth: []
      summary: Delete Device Status
      tags:
      - 05. Device Statuses
    get:
      consumes:
      - application/json
      description: Retrieves a single device status by ID
      parameters:
      - description: Device Status ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/dtos.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/dtos.DeviceStatusResponseDTO'
              type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
      security:
      - BearerAuth: []
      summary: Get Device Status by ID
      tags:
      - 05. Device Statuses
    put:
      consumes:
      - application/json
      description: Updates an existing device status
      parameters:
      - description: Device Status ID
        in: path
        name: id
        required: true
        type: string
      - description: Update Device Status Request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dtos.UpdateDeviceStatusRequestDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
      security:
      - BearerAuth: []
      summary: Update Device Status
      tags:
      - 05. Device Statuses
  /api/devices:
    get:
      consumes:
      - application/json
      description: Retrieves all devices
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/dtos.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/dtos.DeviceListResponseDTO'
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
      security:
      - BearerAuth: []
      summary: Get All Devices
      tags:
      - 04. Devices
    post:
      consumes:
      - application/json
      description: Creates a new device under a teralux unit
      parameters:
      - description: Create Device Request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dtos.CreateDeviceRequestDTO'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/dtos.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/dtos.CreateDeviceResponseDTO'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
      security:
      - BearerAuth: []
      summary: Create Device
      tags:
      - 04. Devices
  /api/devices/{id}:
    delete:
      consumes:
      - application/json
      description: Deletes a device
      parameters:
      - description: Device ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
      security:
      - BearerAuth: []
      summary: Delete Device
      tags:
      - 04. Devices
    get:
      consumes:
      - application/json
      description: Retrieves a single device by ID
      parameters:
      - description: Device ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/dtos.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/dtos.DeviceResponseDTO'
              type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
      security:
      - BearerAuth: []
      summary: Get Device by ID
      tags:
      - 04. Devices
    put:
      consumes:
      - application/json
      description: Updates an existing device
      parameters:
      - description: Device ID
        in: path
        name: id
        required: true
        type: string
      - description: Update Device Request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dtos.UpdateDeviceRequestDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
      security:
      - BearerAuth: []
      summary: Update Device
      tags:
      - 04. Devices
  /api/teralux:
    get:
      consumes:
      - application/json
      description: Retrieves a list of all teralux devices
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/dtos.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/dtos.TeraluxListResponseDTO'
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
      security:
      - ApiKeyAuth: []
      summary: Get All Teralux
      tags:
      - 03. Teralux
    post:
      consumes:
      - application/json
      description: Creates a new teralux device
      parameters:
      - description: Create Teralux Request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dtos.CreateTeraluxRequestDTO'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/dtos.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/dtos.CreateTeraluxResponseDTO'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
      security:
      - ApiKeyAuth: []
      summary: Create Teralux
      tags:
      - 03. Teralux
  /api/teralux/{id}:
    delete:
      consumes:
      - application/json
      description: Soft deletes a teralux device by ID
      parameters:
      - description: Teralux ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
      security:
      - BearerAuth: []
      summary: Delete Teralux
      tags:
      - 03. Teralux
    get:
      consumes:
      - application/json
      description: Retrieves a single teralux device by ID with its associated devices
      parameters:
      - description: Teralux ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Returns teralux with room_id and devices array (empty if no
            devices)
          schema:
            allOf:
            - $ref: '#/definitions/dtos.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/dtos.TeraluxResponseDTO'
              type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
      security:
      - BearerAuth: []
      summary: Get Teralux by ID
      tags:
      - 03. Teralux
    put:
      consumes:
      - application/json
      description: Updates an existing teralux device
      parameters:
      - description: Teralux ID
        in: path
        name: id
        required: true
        type: string
      - description: Update Teralux Request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dtos.UpdateTeraluxRequestDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
      security:
      - BearerAuth: []
      summary: Update Teralux
      tags:
      - 03. Teralux
  /api/teralux/mac/{mac}:
    get:
      consumes:
      - application/json
      description: Retrieves a teralux device by its MAC address
      parameters:
      - description: MAC Address
        in: path
        name: mac
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/dtos.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/dtos.TeraluxResponseDTO'
              type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
      security:
      - ApiKeyAuth: []
      summary: Get Teralux by MAC Address
      tags:
      - 03. Teralux
  /api/tuya/auth:
    get:
      consumes:
      - application/json
      description: Authenticates the user and retrieves a Tuya access token
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/dtos.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/dtos.TuyaAuthResponseDTO'
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
      security:
      - ApiKeyAuth: []
      summary: Authenticate with Tuya
      tags:
      - 01. Auth
  /api/tuya/devices:
    get:
      consumes:
      - application/json
      description: 'Retrieves a list of all devices. Response format depends on GET_ALL_DEVICES_RESPONSE_TYPE:
        0 (Nested/Default), 1 (Flat), 2 (Merged). Sorted alphabetically by Name. For
        infrared_ac devices, the status array is populated with saved device state
        (power, temp, mode, wind) or default values if no state exists.'
      parameters:
      - description: Page number
        in: query
        name: page
        type: integer
      - description: Items per page
        in: query
        name: limit
        type: integer
      - description: Filter by category
        in: query
        name: category
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/dtos.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/dtos.TuyaDevicesResponseDTO'
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
      security:
      - BearerAuth: []
      summary: Get All Devices
      tags:
      - 02. Tuya
  /api/tuya/devices/{id}:
    get:
      consumes:
      - application/json
      description: Retrieves details of a specific device by its ID. Response includes
        last_commands field containing the last control commands sent to the device.
      parameters:
      - description: Device ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/dtos.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/dtos.TuyaDeviceResponseDTO'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
      security:
      - BearerAuth: []
      summary: Get Device by ID
      tags:
      - 02. Tuya
  /api/tuya/devices/{id}/commands/ir:
    post:
      consumes:
      - application/json
      description: Sends an infrared command to an AC via a specific IR device
      parameters:
      - description: Infrared Device ID
        in: path
        name: id
        required: true
        type: string
      - description: IR AC Command Payload
        in: body
        name: command
        required: true
        schema:
          $ref: '#/definitions/dtos.TuyaIRACCommandDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
      security:
      - BearerAuth: []
      summary: Send IR AC Command
      tags:
      - 02. Tuya
  /api/tuya/devices/{id}/commands/switch:
    post:
      consumes:
      - application/json
      description: Sends a command to a specific Tuya device
      parameters:
      - description: Device ID
        in: path
        name: id
        required: true
        type: string
      - description: Command Payload
        in: body
        name: command
        required: true
        schema:
          $ref: '#/definitions/dtos.TuyaCommandDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
      security:
      - BearerAuth: []
      summary: Send Command to Device
      tags:
      - 02. Tuya
  /api/tuya/devices/{id}/sensor:
    get:
      consumes:
      - application/json
      description: Retrieves sensor data (temperature, humidity, etc.) for a specific
        device
      parameters:
      - description: Device ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/dtos.StandardResponse'
            - properties:
                data:
                  $ref: '#/definitions/dtos.SensorDataDTO'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
      security:
      - BearerAuth: []
      summary: Get Sensor Data
      tags:
      - 02. Tuya
  /api/tuya/devices/sync:
    get:
      consumes:
      - application/json
      description: Fetches real-time status from Tuya. Does NOT update local DB. Returns
        fresh device list.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/dtos.StandardResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/dtos.TuyaSyncDeviceDTO'
                  type: array
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dtos.StandardResponse'
      security:
      - ApiKeyAuth: []
      - BearerAuth: []
      summary: Sync Teralux Device Status
      tags:
      - 02. Tuya
  /health:
    get:
      description: Check if the application and database are healthy
      produces:
      - text/plain
      responses:
        "200":
          description: OK
          schema:
            type: string
        "503":
          description: Service Unavailable
          schema:
            type: string
      summary: Health check endpoint
      tags:
      - 07. Health
securityDefinitions:
  ApiKeyAuth:
    in: header
    name: X-API-KEY
    type: apiKey
  BearerAuth:
    description: Type "Bearer" followed by a space and JWT token.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
tags:
- description: Authentication endpoints
  name: 01. Auth
- description: Tuya related endpoints
  name: 02. Tuya
- description: Teralux device management endpoints
  name: 03. Teralux
- description: Teralux specific devices endpoints
  name: 04. Devices
- description: Device status management endpoints
  name: 05. Device Statuses
- description: Cache management endpoints
  name: 06. Flush
- description: Health check endpoint
  name: 07. Health
